import { useState } from 'react'
import { useDispatch, useSelector } from "react-redux"
import { useNavigate } from 'react-router-dom'

import { loginUser } from "../redux/authSlice"

const LoginForm = () => {
    const dispatch = useDispatch()

    const [username, setUsername] = useState('')
    const [password, setPassword] = useState('')

    const errorMessage = useSelector((state) => state.auth.errorMessage)

    const handleLogin = async (event) => {
        event.preventDefault()
        dispatch(loginUser({ username, password }))
    }

    return (
        <div className='page-wrapper'>
            <header className="logo-header">
                <a href='/'>
                    <svg xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" width="500" viewBox="0 0 375 374.999991" height="500" className="logo" version="1.0"><defs><g /></defs><g fill="#646cff" fillOpacity="1"><g transform="translate(15.366139, 222.078744)"><g><path d="M 72.15625 -2.65625 C 72.15625 -0.96875 68.375 -0.125 60.8125 -0.125 C 53.25 -0.125 49.144531 -0.726562 48.5 -1.9375 L 28.359375 -39.578125 L 28.359375 -2.046875 C 28.359375 -0.597656 24.632812 0.125 17.1875 0.125 C 9.75 0.125 6.03125 -0.597656 6.03125 -2.046875 L 6.03125 -82.765625 C 6.03125 -83.972656 9.207031 -84.578125 15.5625 -84.578125 C 18.0625 -84.578125 20.976562 -84.351562 24.3125 -83.90625 C 27.644531 -83.46875 29.675781 -82.644531 30.40625 -81.4375 L 49.703125 -44.28125 L 49.703125 -82.171875 C 49.703125 -83.691406 53.441406 -84.453125 60.921875 -84.453125 C 68.410156 -84.453125 72.15625 -83.691406 72.15625 -82.171875 Z M 72.15625 -2.65625 " /></g></g></g><g fill="#646cff" fillOpacity="1"><g transform="translate(93.551425, 222.078744)"><g><path d="M 41.921875 1.203125 C 30.617188 1.203125 21.410156 -2.492188 14.296875 -9.890625 C 7.179688 -17.296875 3.625 -28.09375 3.625 -42.28125 C 3.625 -56.476562 7.222656 -67.238281 14.421875 -74.5625 C 21.617188 -81.882812 30.90625 -85.546875 42.28125 -85.546875 C 53.664062 -85.546875 62.859375 -81.945312 69.859375 -74.75 C 76.859375 -67.550781 80.359375 -56.648438 80.359375 -42.046875 C 80.359375 -27.453125 76.773438 -16.59375 69.609375 -9.46875 C 62.453125 -2.351562 53.222656 1.203125 41.921875 1.203125 Z M 41.984375 -62.375 C 38.128906 -62.375 34.894531 -60.601562 32.28125 -57.0625 C 29.664062 -53.53125 28.359375 -48.566406 28.359375 -42.171875 C 28.359375 -35.773438 29.601562 -30.867188 32.09375 -27.453125 C 34.582031 -24.035156 37.859375 -22.328125 41.921875 -22.328125 C 45.984375 -22.328125 49.28125 -24.054688 51.8125 -27.515625 C 54.351562 -30.972656 55.625 -35.914062 55.625 -42.34375 C 55.625 -48.78125 54.316406 -53.726562 51.703125 -57.1875 C 49.085938 -60.644531 45.847656 -62.375 41.984375 -62.375 Z M 41.984375 -62.375 " /></g></g></g><g fill="#646cff" fillOpacity="1"><g transform="translate(177.528211, 222.078744)"><g><path d="M 42.34375 -1.9375 C 42.34375 -0.320312 38.359375 0.484375 30.390625 0.484375 C 22.429688 0.484375 18.453125 -0.320312 18.453125 -1.9375 L 18.453125 -62.5 L 3.984375 -62.5 C 2.617188 -62.5 1.648438 -64.347656 1.078125 -68.046875 C 0.835938 -69.816406 0.71875 -71.625 0.71875 -73.46875 C 0.71875 -75.320312 0.835938 -77.132812 1.078125 -78.90625 C 1.648438 -82.601562 2.617188 -84.453125 3.984375 -84.453125 L 56.46875 -84.453125 C 57.832031 -84.453125 58.796875 -82.601562 59.359375 -78.90625 C 59.597656 -77.132812 59.71875 -75.320312 59.71875 -73.46875 C 59.71875 -71.625 59.597656 -69.816406 59.359375 -68.046875 C 58.796875 -64.347656 57.832031 -62.5 56.46875 -62.5 L 42.34375 -62.5 Z M 42.34375 -1.9375 " /></g></g></g><g fill="#646cff" fillOpacity="1"><g transform="translate(238.097677, 222.078744)"><g><path d="M 45.25 -50.921875 C 46.769531 -50.921875 47.53125 -48.101562 47.53125 -42.46875 C 47.53125 -40.78125 47.347656 -38.789062 46.984375 -36.5 C 46.628906 -34.207031 45.96875 -33.0625 45 -33.0625 L 29.6875 -33.0625 L 29.6875 -21 L 51.875 -21 C 53.25 -21 54.175781 -19.226562 54.65625 -15.6875 C 54.894531 -14.15625 55.015625 -12.523438 55.015625 -10.796875 C 55.015625 -9.066406 54.773438 -6.832031 54.296875 -4.09375 C 53.816406 -1.363281 53.007812 0 51.875 0 L 10.625 0 C 7.5625 0 6.03125 -1.242188 6.03125 -3.734375 L 6.03125 -81.328125 C 6.03125 -83.410156 6.957031 -84.453125 8.8125 -84.453125 L 52 -84.453125 C 53.6875 -84.453125 54.53125 -80.894531 54.53125 -73.78125 C 54.53125 -66.664062 53.6875 -63.109375 52 -63.109375 L 29.6875 -63.109375 L 29.6875 -50.921875 Z M 45.25 -50.921875 " /></g></g></g><g fill="#646cff" fillOpacity="1"><g transform="translate(297.581224, 222.078744)"><g><path d="M 9.171875 -29.4375 C 10.703125 -28.226562 13.335938 -26.578125 17.078125 -24.484375 C 20.816406 -22.398438 24.394531 -21.359375 27.8125 -21.359375 C 31.226562 -21.359375 32.9375 -22.6875 32.9375 -25.34375 C 32.9375 -26.539062 32.453125 -27.601562 31.484375 -28.53125 C 30.523438 -29.457031 28.757812 -30.523438 26.1875 -31.734375 C 23.613281 -32.941406 21.679688 -33.882812 20.390625 -34.5625 C 19.097656 -35.25 17.382812 -36.375 15.25 -37.9375 C 13.125 -39.507812 11.5 -41.140625 10.375 -42.828125 C 7.15625 -47.410156 5.546875 -53.242188 5.546875 -60.328125 C 5.546875 -67.410156 8.179688 -73.382812 13.453125 -78.25 C 18.722656 -83.113281 25.617188 -85.546875 34.140625 -85.546875 C 39.929688 -85.546875 45.28125 -84.921875 50.1875 -83.671875 C 55.09375 -82.429688 57.628906 -80.800781 57.796875 -78.78125 C 57.796875 -78.539062 57.796875 -78.300781 57.796875 -78.0625 C 57.796875 -75.25 56.910156 -71.691406 55.140625 -67.390625 C 53.367188 -63.085938 52.125 -60.691406 51.40625 -60.203125 C 46.25 -62.859375 41.640625 -64.1875 37.578125 -64.1875 C 33.515625 -64.1875 31.484375 -62.738281 31.484375 -59.84375 C 31.484375 -58.070312 32.972656 -56.503906 35.953125 -55.140625 C 36.597656 -54.816406 37.523438 -54.375 38.734375 -53.8125 C 39.941406 -53.25 41.328125 -52.582031 42.890625 -51.8125 C 44.460938 -51.050781 46.148438 -50.085938 47.953125 -48.921875 C 49.765625 -47.753906 51.71875 -46.207031 53.8125 -44.28125 C 58.070312 -40.257812 60.203125 -34.953125 60.203125 -28.359375 C 60.203125 -19.742188 57.828125 -12.703125 53.078125 -7.234375 C 48.335938 -1.765625 41.019531 1.046875 31.125 1.203125 C 26.300781 1.203125 21.9375 0.800781 18.03125 0 C 14.132812 -0.800781 10.738281 -2.367188 7.84375 -4.703125 C 4.945312 -7.035156 3.5 -9.847656 3.5 -13.140625 C 3.5 -16.441406 4.101562 -19.722656 5.3125 -22.984375 C 6.519531 -26.242188 7.804688 -28.394531 9.171875 -29.4375 Z M 9.171875 -29.4375 " /></g></g></g></svg>
                </a>
            </header>
            <div className='form-container'>
                <h2 className='title'>Login</h2>
                <form onSubmit={handleLogin}>
                    {errorMessage && <div className='alert alert-danger'>{errorMessage}</div>}
                    <div className='mb-3'>
                        <label htmlFor='text' className='form-label'>Username</label>
                        <input
                            id='username'
                            value={username}
                            name="Username"
                            type="text"
                            className='form-control'
                            onChange={(e) => setUsername(e.target.value)}
                        />
                    </div>
                    <div className='mb-3'>
                        <label htmlFor='password' className='form-label'>Password</label>
                        <input
                            id='password'
                            value={password}
                            name="Password"
                            type="current-password"
                            className='form-control'
                            onChange={(e) => setPassword(e.target.value)}
                        />
                    </div>
                    <div className='button-container'>
                        <button id="login-button" type="submit" className="login-button me-3">login</button>
                        <a href="/">
                            <button type="button" className="cancel-button" >cancel</button>
                        </a>
                    </div>
                </form>
            </div >
        </div>
    )
}


export default LoginForm